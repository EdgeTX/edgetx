#!/bin/bash

APPDIR="$(dirname "$(readlink -f "$0")")"
CALLED_AS="$(basename "$0")"

# Check if called via symlink with "simulator" in name
if [[ "$CALLED_AS" == *"simulator"* ]]; then
    exec "${APPDIR}/usr/bin/@SIMULATOR_NAME@" "$@"
fi

# Check for command-line parameter
case "$1" in
    --simulator)
        shift
        exec "${APPDIR}/usr/bin/@SIMULATOR_NAME@" "$@"
        ;;
    --help)
        echo "Usage: $0 [OPTIONS]"
        echo "  (no options)     Launch Companion"
        echo "  --simulator      Launch Simulator"
        echo "  Or create a symlink with 'simulator' in the name"
        exit 0
        ;;
    *)
        exec "${APPDIR}/usr/bin/@COMPANION_NAME@" "$@"
        ;;
esac
